2026-02-01 13:25:44.470 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-01 13:25:44.518 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-01 13:25:44.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-01 13:25:44.526 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-01 13:25:44.540 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-02-01 13:25:44.550 +03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-01 13:25:44.552 +03:00 [INF] Database migration completed successfully
2026-02-01 13:25:44.555 +03:00 [INF] Market Intelligence API starting...
2026-02-01 13:25:44.577 +03:00 [INF] Now listening on: http://localhost:5021
2026-02-01 13:25:44.580 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-01 13:25:44.581 +03:00 [INF] Hosting environment: Development
2026-02-01 13:25:44.583 +03:00 [INF] Content root path: D:\Storage Market Intel\Alfanar.MarketIntel\Alfanar.MarketIntel.Api
2026-02-01 13:27:09.302 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - null null
2026-02-01 13:27:09.327 +03:00 [WRN] Failed to determine the https port for redirect.
2026-02-01 13:27:09.336 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:27:09.353 +03:00 [INF] Route matched with {action = "GetFiltered", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFiltered(Alfanar.MarketIntel.Application.DTOs.ReportFilterDto) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:27:09.367 +03:00 [INF] Google AI Analyzer initialized with model: gemini-2.5-flash, Caching: false, Streaming: true
2026-02-01 13:27:10.251 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyName], [t].[CreatedUtc], [t].[DownloadUrl], [t].[ErrorMessage], [t].[ExtractedText], [t].[FilePath], [t].[FileSizeBytes], [t].[FiscalQuarter], [t].[FiscalYear], [t].[IsProcessed], [t].[Language], [t].[Metadata], [t].[PageCount], [t].[ProcessedUtc], [t].[ProcessingStatus], [t].[PublishedDate], [t].[Region], [t].[ReportType], [t].[RequiredOcr], [t].[Sector], [t].[SourceUrl], [t].[Title], [t].[UpdatedUtc], [r].[Id], [r].[AiModel], [r].[AnalysisConfidence], [r].[CompetitivePosition], [r].[CreatedUtc], [r].[ExecutiveSummary], [r].[FinancialMetrics], [r].[FinancialReportId], [r].[InvestmentThesis], [r].[KeyHighlights], [r].[MarketOutlook], [r].[ProcessingTimeMs], [r].[RelatedEntities], [r].[RiskFactors], [r].[SentimentLabel], [r].[SentimentScore], [r].[StrategicInitiatives], [r].[Tags], [r].[TokensUsed], [r].[UpdatedUtc]
FROM (
    SELECT [f].[Id], [f].[CompanyName], [f].[CreatedUtc], [f].[DownloadUrl], [f].[ErrorMessage], [f].[ExtractedText], [f].[FilePath], [f].[FileSizeBytes], [f].[FiscalQuarter], [f].[FiscalYear], [f].[IsProcessed], [f].[Language], [f].[Metadata], [f].[PageCount], [f].[ProcessedUtc], [f].[ProcessingStatus], [f].[PublishedDate], [f].[Region], [f].[ReportType], [f].[RequiredOcr], [f].[Sector], [f].[SourceUrl], [f].[Title], [f].[UpdatedUtc], COALESCE([f].[PublishedDate], [f].[CreatedUtc]) AS [c]
    FROM [FinancialReports] AS [f]
    ORDER BY COALESCE([f].[PublishedDate], [f].[CreatedUtc]) DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [ReportAnalyses] AS [r] ON [t].[Id] = [r].[FinancialReportId]
ORDER BY [t].[c] DESC
2026-02-01 13:27:10.334 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [FinancialReports] AS [f]
2026-02-01 13:27:10.352 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType43`7[[System.Collections.Generic.List`1[[Alfanar.MarketIntel.Application.DTOs.FinancialReportDto, Alfanar.MarketIntel.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-01 13:27:10.383 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api) in 1017.7178ms
2026-02-01 13:27:10.390 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:27:10.395 +03:00 [INF] HTTP GET /api/reports responded 200 in 1074.1616 ms
2026-02-01 13:27:10.401 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - 200 null application/json; charset=utf-8 1099.5617ms
2026-02-01 13:27:14.536 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/reports/ingest - application/json 1146
2026-02-01 13:27:14.544 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:27:14.550 +03:00 [INF] Route matched with {action = "IngestReport", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IngestReport(Alfanar.MarketIntel.Application.DTOs.IngestReportRequest) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:27:14.721 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-01 13:27:14.730 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api) in 175.5024ms
2026-02-01 13:27:14.734 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:27:14.737 +03:00 [INF] HTTP POST /api/reports/ingest responded 400 in 193.0628 ms
2026-02-01 13:27:14.740 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/reports/ingest - 400 null application/problem+json; charset=utf-8 203.7592ms
2026-02-01 13:28:40.488 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - null null
2026-02-01 13:28:40.494 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:28:40.499 +03:00 [INF] Route matched with {action = "GetFiltered", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFiltered(Alfanar.MarketIntel.Application.DTOs.ReportFilterDto) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:28:41.020 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyName], [t].[CreatedUtc], [t].[DownloadUrl], [t].[ErrorMessage], [t].[ExtractedText], [t].[FilePath], [t].[FileSizeBytes], [t].[FiscalQuarter], [t].[FiscalYear], [t].[IsProcessed], [t].[Language], [t].[Metadata], [t].[PageCount], [t].[ProcessedUtc], [t].[ProcessingStatus], [t].[PublishedDate], [t].[Region], [t].[ReportType], [t].[RequiredOcr], [t].[Sector], [t].[SourceUrl], [t].[Title], [t].[UpdatedUtc], [r].[Id], [r].[AiModel], [r].[AnalysisConfidence], [r].[CompetitivePosition], [r].[CreatedUtc], [r].[ExecutiveSummary], [r].[FinancialMetrics], [r].[FinancialReportId], [r].[InvestmentThesis], [r].[KeyHighlights], [r].[MarketOutlook], [r].[ProcessingTimeMs], [r].[RelatedEntities], [r].[RiskFactors], [r].[SentimentLabel], [r].[SentimentScore], [r].[StrategicInitiatives], [r].[Tags], [r].[TokensUsed], [r].[UpdatedUtc]
FROM (
    SELECT [f].[Id], [f].[CompanyName], [f].[CreatedUtc], [f].[DownloadUrl], [f].[ErrorMessage], [f].[ExtractedText], [f].[FilePath], [f].[FileSizeBytes], [f].[FiscalQuarter], [f].[FiscalYear], [f].[IsProcessed], [f].[Language], [f].[Metadata], [f].[PageCount], [f].[ProcessedUtc], [f].[ProcessingStatus], [f].[PublishedDate], [f].[Region], [f].[ReportType], [f].[RequiredOcr], [f].[Sector], [f].[SourceUrl], [f].[Title], [f].[UpdatedUtc], COALESCE([f].[PublishedDate], [f].[CreatedUtc]) AS [c]
    FROM [FinancialReports] AS [f]
    ORDER BY COALESCE([f].[PublishedDate], [f].[CreatedUtc]) DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [ReportAnalyses] AS [r] ON [t].[Id] = [r].[FinancialReportId]
ORDER BY [t].[c] DESC
2026-02-01 13:28:41.034 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [FinancialReports] AS [f]
2026-02-01 13:28:41.045 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType43`7[[System.Collections.Generic.List`1[[Alfanar.MarketIntel.Application.DTOs.FinancialReportDto, Alfanar.MarketIntel.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-01 13:28:41.053 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api) in 546.801ms
2026-02-01 13:28:41.060 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:28:41.065 +03:00 [INF] HTTP GET /api/reports responded 200 in 571.6680 ms
2026-02-01 13:28:41.070 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - 200 null application/json; charset=utf-8 581.7828ms
2026-02-01 13:28:41.076 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/reports/ingest - application/json 1149
2026-02-01 13:28:41.081 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:28:41.084 +03:00 [INF] Route matched with {action = "IngestReport", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IngestReport(Alfanar.MarketIntel.Application.DTOs.IngestReportRequest) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:28:41.255 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceUrl_0='?' (Size = 2000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [FinancialReports] AS [f]
        WHERE [f].[SourceUrl] = @__sourceUrl_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-01 13:28:41.262 +03:00 [INF] Start processing HTTP request GET https://example.com/test-report.pdf
2026-02-01 13:28:41.267 +03:00 [INF] Sending HTTP request GET https://example.com/test-report.pdf
2026-02-01 13:28:41.647 +03:00 [INF] Received HTTP response headers after 370.4951ms - 404
2026-02-01 13:28:41.652 +03:00 [INF] End processing HTTP request after 391.0747ms - 404
2026-02-01 13:28:41.658 +03:00 [WRN] Failed to download or store report from https://example.com/test-report.pdf: Failed to download report from https://example.com/test-report.pdf. Status: 404 Not Found
2026-02-01 13:28:41.661 +03:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-01 13:28:41.666 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api) in 577.4768ms
2026-02-01 13:28:41.669 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:28:41.672 +03:00 [INF] HTTP POST /api/reports/ingest responded 400 in 590.9430 ms
2026-02-01 13:28:41.675 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/reports/ingest - 400 null application/json; charset=utf-8 598.4751ms
2026-02-01 13:28:56.507 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - null null
2026-02-01 13:28:56.513 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:28:56.518 +03:00 [INF] Route matched with {action = "GetFiltered", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFiltered(Alfanar.MarketIntel.Application.DTOs.ReportFilterDto) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:28:56.685 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyName], [t].[CreatedUtc], [t].[DownloadUrl], [t].[ErrorMessage], [t].[ExtractedText], [t].[FilePath], [t].[FileSizeBytes], [t].[FiscalQuarter], [t].[FiscalYear], [t].[IsProcessed], [t].[Language], [t].[Metadata], [t].[PageCount], [t].[ProcessedUtc], [t].[ProcessingStatus], [t].[PublishedDate], [t].[Region], [t].[ReportType], [t].[RequiredOcr], [t].[Sector], [t].[SourceUrl], [t].[Title], [t].[UpdatedUtc], [r].[Id], [r].[AiModel], [r].[AnalysisConfidence], [r].[CompetitivePosition], [r].[CreatedUtc], [r].[ExecutiveSummary], [r].[FinancialMetrics], [r].[FinancialReportId], [r].[InvestmentThesis], [r].[KeyHighlights], [r].[MarketOutlook], [r].[ProcessingTimeMs], [r].[RelatedEntities], [r].[RiskFactors], [r].[SentimentLabel], [r].[SentimentScore], [r].[StrategicInitiatives], [r].[Tags], [r].[TokensUsed], [r].[UpdatedUtc]
FROM (
    SELECT [f].[Id], [f].[CompanyName], [f].[CreatedUtc], [f].[DownloadUrl], [f].[ErrorMessage], [f].[ExtractedText], [f].[FilePath], [f].[FileSizeBytes], [f].[FiscalQuarter], [f].[FiscalYear], [f].[IsProcessed], [f].[Language], [f].[Metadata], [f].[PageCount], [f].[ProcessedUtc], [f].[ProcessingStatus], [f].[PublishedDate], [f].[Region], [f].[ReportType], [f].[RequiredOcr], [f].[Sector], [f].[SourceUrl], [f].[Title], [f].[UpdatedUtc], COALESCE([f].[PublishedDate], [f].[CreatedUtc]) AS [c]
    FROM [FinancialReports] AS [f]
    ORDER BY COALESCE([f].[PublishedDate], [f].[CreatedUtc]) DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [ReportAnalyses] AS [r] ON [t].[Id] = [r].[FinancialReportId]
ORDER BY [t].[c] DESC
2026-02-01 13:28:56.692 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [FinancialReports] AS [f]
2026-02-01 13:28:56.697 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType43`7[[System.Collections.Generic.List`1[[Alfanar.MarketIntel.Application.DTOs.FinancialReportDto, Alfanar.MarketIntel.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-01 13:28:56.701 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api) in 174.4479ms
2026-02-01 13:28:56.704 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:28:56.707 +03:00 [INF] HTTP GET /api/reports responded 200 in 193.9008 ms
2026-02-01 13:28:56.710 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - 200 null application/json; charset=utf-8 203.0661ms
2026-02-01 13:28:56.719 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/reports/ingest - application/json 1149
2026-02-01 13:28:56.723 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:28:56.726 +03:00 [INF] Route matched with {action = "IngestReport", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IngestReport(Alfanar.MarketIntel.Application.DTOs.IngestReportRequest) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:28:56.862 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceUrl_0='?' (Size = 2000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [FinancialReports] AS [f]
        WHERE [f].[SourceUrl] = @__sourceUrl_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-01 13:28:56.868 +03:00 [INF] Start processing HTTP request GET https://example.com/test-report.pdf
2026-02-01 13:28:56.872 +03:00 [INF] Sending HTTP request GET https://example.com/test-report.pdf
2026-02-01 13:28:56.975 +03:00 [INF] Received HTTP response headers after 99.3445ms - 404
2026-02-01 13:28:56.980 +03:00 [INF] End processing HTTP request after 111.3482ms - 404
2026-02-01 13:28:56.984 +03:00 [WRN] Failed to download or store report from https://example.com/test-report.pdf: Failed to download report from https://example.com/test-report.pdf. Status: 404 Not Found
2026-02-01 13:28:56.987 +03:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-01 13:28:56.991 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api) in 261.1328ms
2026-02-01 13:28:56.994 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:28:56.997 +03:00 [INF] HTTP POST /api/reports/ingest responded 400 in 274.1204 ms
2026-02-01 13:28:57.000 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/reports/ingest - 400 null application/json; charset=utf-8 280.748ms
2026-02-01 13:29:05.259 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/reports/ingest - application/json 333
2026-02-01 13:29:05.264 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:29:05.269 +03:00 [INF] Route matched with {action = "IngestReport", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IngestReport(Alfanar.MarketIntel.Application.DTOs.IngestReportRequest) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:29:05.423 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sourceUrl_0='?' (Size = 2000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [FinancialReports] AS [f]
        WHERE [f].[SourceUrl] = @__sourceUrl_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-01 13:29:05.428 +03:00 [INF] Start processing HTTP request GET https://example.com/test.pdf
2026-02-01 13:29:05.432 +03:00 [INF] Sending HTTP request GET https://example.com/test.pdf
2026-02-01 13:29:05.533 +03:00 [INF] Received HTTP response headers after 97.6904ms - 404
2026-02-01 13:29:05.543 +03:00 [INF] End processing HTTP request after 115.1776ms - 404
2026-02-01 13:29:05.552 +03:00 [WRN] Failed to download or store report from https://example.com/test.pdf: Failed to download report from https://example.com/test.pdf. Status: 404 Not Found
2026-02-01 13:29:05.555 +03:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-01 13:29:05.560 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api) in 284.053ms
2026-02-01 13:29:05.566 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:29:05.571 +03:00 [INF] HTTP POST /api/reports/ingest responded 400 in 306.5987 ms
2026-02-01 13:29:05.576 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/reports/ingest - 400 null application/json; charset=utf-8 317.6067ms
2026-02-01 13:29:14.199 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - null null
2026-02-01 13:29:14.203 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:29:14.206 +03:00 [INF] Route matched with {action = "GetFiltered", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFiltered(Alfanar.MarketIntel.Application.DTOs.ReportFilterDto) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:29:14.365 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyName], [t].[CreatedUtc], [t].[DownloadUrl], [t].[ErrorMessage], [t].[ExtractedText], [t].[FilePath], [t].[FileSizeBytes], [t].[FiscalQuarter], [t].[FiscalYear], [t].[IsProcessed], [t].[Language], [t].[Metadata], [t].[PageCount], [t].[ProcessedUtc], [t].[ProcessingStatus], [t].[PublishedDate], [t].[Region], [t].[ReportType], [t].[RequiredOcr], [t].[Sector], [t].[SourceUrl], [t].[Title], [t].[UpdatedUtc], [r].[Id], [r].[AiModel], [r].[AnalysisConfidence], [r].[CompetitivePosition], [r].[CreatedUtc], [r].[ExecutiveSummary], [r].[FinancialMetrics], [r].[FinancialReportId], [r].[InvestmentThesis], [r].[KeyHighlights], [r].[MarketOutlook], [r].[ProcessingTimeMs], [r].[RelatedEntities], [r].[RiskFactors], [r].[SentimentLabel], [r].[SentimentScore], [r].[StrategicInitiatives], [r].[Tags], [r].[TokensUsed], [r].[UpdatedUtc]
FROM (
    SELECT [f].[Id], [f].[CompanyName], [f].[CreatedUtc], [f].[DownloadUrl], [f].[ErrorMessage], [f].[ExtractedText], [f].[FilePath], [f].[FileSizeBytes], [f].[FiscalQuarter], [f].[FiscalYear], [f].[IsProcessed], [f].[Language], [f].[Metadata], [f].[PageCount], [f].[ProcessedUtc], [f].[ProcessingStatus], [f].[PublishedDate], [f].[Region], [f].[ReportType], [f].[RequiredOcr], [f].[Sector], [f].[SourceUrl], [f].[Title], [f].[UpdatedUtc], COALESCE([f].[PublishedDate], [f].[CreatedUtc]) AS [c]
    FROM [FinancialReports] AS [f]
    ORDER BY COALESCE([f].[PublishedDate], [f].[CreatedUtc]) DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [ReportAnalyses] AS [r] ON [t].[Id] = [r].[FinancialReportId]
ORDER BY [t].[c] DESC
2026-02-01 13:29:14.372 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [FinancialReports] AS [f]
2026-02-01 13:29:14.376 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType43`7[[System.Collections.Generic.List`1[[Alfanar.MarketIntel.Application.DTOs.FinancialReportDto, Alfanar.MarketIntel.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-01 13:29:14.380 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api) in 169.5929ms
2026-02-01 13:29:14.383 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:29:14.386 +03:00 [INF] HTTP GET /api/reports responded 200 in 183.0793 ms
2026-02-01 13:29:14.389 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - 200 null application/json; charset=utf-8 190.363ms
2026-02-01 13:29:59.863 +03:00 [INF] Application is shutting down...
2026-02-01 13:30:07.008 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:30:07.044 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:30:07.048 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:30:07.052 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:30:07.065 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:30:07.086 +03:00 [INF] No migrations were applied. The database is already up to date. {"EventId":{"Id":20405,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationsNotApplied"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations"}
2026-02-01 13:30:07.088 +03:00 [INF] Database migration completed successfully {}
2026-02-01 13:30:07.091 +03:00 [INF] Market Intelligence API starting... {}
2026-02-01 13:30:07.113 +03:00 [INF] Now listening on: http://localhost:5021 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
2026-02-01 13:30:07.116 +03:00 [INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
2026-02-01 13:30:07.117 +03:00 [INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
2026-02-01 13:30:07.118 +03:00 [INF] Content root path: D:\Storage Market Intel\Alfanar.MarketIntel\Alfanar.MarketIntel.Api {"SourceContext":"Microsoft.Hosting.Lifetime"}
2026-02-01 13:30:31.942 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:31.964 +03:00 [WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:31.971 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:31.983 +03:00 [INF] Route matched with {action = "GetFiltered", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFiltered(Alfanar.MarketIntel.Application.DTOs.ReportFilterDto) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"5b525709-fd4d-4e3a-aa0e-fa5e3d05ff9e","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:31.993 +03:00 [INF] Google AI Analyzer initialized with model: gemini-2.5-flash, Caching: false, Streaming: true {"SourceContext":"Alfanar.MarketIntel.Application.Services.GoogleAiDocumentAnalyzer","ActionId":"5b525709-fd4d-4e3a-aa0e-fa5e3d05ff9e","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.731 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyName], [t].[CreatedUtc], [t].[DownloadUrl], [t].[ErrorMessage], [t].[ExtractedText], [t].[FilePath], [t].[FileSizeBytes], [t].[FiscalQuarter], [t].[FiscalYear], [t].[IsProcessed], [t].[Language], [t].[Metadata], [t].[PageCount], [t].[ProcessedUtc], [t].[ProcessingStatus], [t].[PublishedDate], [t].[Region], [t].[ReportType], [t].[RequiredOcr], [t].[Sector], [t].[SourceUrl], [t].[Title], [t].[UpdatedUtc], [r].[Id], [r].[AiModel], [r].[AnalysisConfidence], [r].[CompetitivePosition], [r].[CreatedUtc], [r].[ExecutiveSummary], [r].[FinancialMetrics], [r].[FinancialReportId], [r].[InvestmentThesis], [r].[KeyHighlights], [r].[MarketOutlook], [r].[ProcessingTimeMs], [r].[RelatedEntities], [r].[RiskFactors], [r].[SentimentLabel], [r].[SentimentScore], [r].[StrategicInitiatives], [r].[Tags], [r].[TokensUsed], [r].[UpdatedUtc]
FROM (
    SELECT [f].[Id], [f].[CompanyName], [f].[CreatedUtc], [f].[DownloadUrl], [f].[ErrorMessage], [f].[ExtractedText], [f].[FilePath], [f].[FileSizeBytes], [f].[FiscalQuarter], [f].[FiscalYear], [f].[IsProcessed], [f].[Language], [f].[Metadata], [f].[PageCount], [f].[ProcessedUtc], [f].[ProcessingStatus], [f].[PublishedDate], [f].[Region], [f].[ReportType], [f].[RequiredOcr], [f].[Sector], [f].[SourceUrl], [f].[Title], [f].[UpdatedUtc], COALESCE([f].[PublishedDate], [f].[CreatedUtc]) AS [c]
    FROM [FinancialReports] AS [f]
    ORDER BY COALESCE([f].[PublishedDate], [f].[CreatedUtc]) DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [ReportAnalyses] AS [r] ON [t].[Id] = [r].[FinancialReportId]
ORDER BY [t].[c] DESC {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5b525709-fd4d-4e3a-aa0e-fa5e3d05ff9e","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.816 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [FinancialReports] AS [f] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"5b525709-fd4d-4e3a-aa0e-fa5e3d05ff9e","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.830 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType43`7[[System.Collections.Generic.List`1[[Alfanar.MarketIntel.Application.DTOs.FinancialReportDto, Alfanar.MarketIntel.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"5b525709-fd4d-4e3a-aa0e-fa5e3d05ff9e","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.856 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api) in 864.8074ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.860 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.865 +03:00 [INF] HTTP GET /api/reports responded 200 in 907.3385 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ1FJMLPNJ0:00000001","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.871 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - 200 null application/json; charset=utf-8 929.9432ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNJ1FJMLPNJ0:00000001","RequestPath":"/api/reports","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.880 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/reports/ingest - application/json 1149 {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.887 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:32.893 +03:00 [INF] Route matched with {action = "IngestReport", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IngestReport(Alfanar.MarketIntel.Application.DTOs.IngestReportRequest) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6c4ea612-dedf-4087-b37f-556d7690a75c","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:33.104 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceUrl_0='?' (Size = 2000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [FinancialReports] AS [f]
        WHERE [f].[SourceUrl] = @__sourceUrl_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6c4ea612-dedf-4087-b37f-556d7690a75c","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:33.112 +03:00 [INF] Start processing HTTP request GET https://example.com/test-report.pdf {"EventId":{"Id":100,"Name":"RequestPipelineStart"},"SourceContext":"System.Net.Http.HttpClient.report-ingestion-downloader.LogicalHandler","ActionId":"6c4ea612-dedf-4087-b37f-556d7690a75c","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0","Scope":["HTTP GET https://example.com/test-report.pdf"]}
2026-02-01 13:30:33.117 +03:00 [INF] Sending HTTP request GET https://example.com/test-report.pdf {"EventId":{"Id":100,"Name":"RequestStart"},"SourceContext":"System.Net.Http.HttpClient.report-ingestion-downloader.ClientHandler","ActionId":"6c4ea612-dedf-4087-b37f-556d7690a75c","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0","Scope":["HTTP GET https://example.com/test-report.pdf"]}
2026-02-01 13:30:33.422 +03:00 [INF] Received HTTP response headers after 299.832ms - 404 {"EventId":{"Id":101,"Name":"RequestEnd"},"SourceContext":"System.Net.Http.HttpClient.report-ingestion-downloader.ClientHandler","HttpMethod":"GET","Uri":"https://example.com/test-report.pdf","ActionId":"6c4ea612-dedf-4087-b37f-556d7690a75c","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0","Scope":["HTTP GET https://example.com/test-report.pdf"]}
2026-02-01 13:30:33.428 +03:00 [INF] End processing HTTP request after 316.4033ms - 404 {"EventId":{"Id":101,"Name":"RequestPipelineEnd"},"SourceContext":"System.Net.Http.HttpClient.report-ingestion-downloader.LogicalHandler","HttpMethod":"GET","Uri":"https://example.com/test-report.pdf","ActionId":"6c4ea612-dedf-4087-b37f-556d7690a75c","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0","Scope":["HTTP GET https://example.com/test-report.pdf"]}
2026-02-01 13:30:33.434 +03:00 [WRN] Failed to download or store report from https://example.com/test-report.pdf: Failed to download report from https://example.com/test-report.pdf. Status: 404 Not Found {"SourceContext":"Alfanar.MarketIntel.Application.Services.ReportService","ActionId":"6c4ea612-dedf-4087-b37f-556d7690a75c","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:33.438 +03:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6c4ea612-dedf-4087-b37f-556d7690a75c","ActionName":"Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:33.443 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api) in 541.5698ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:33.446 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:33.450 +03:00 [INF] HTTP POST /api/reports/ingest responded 400 in 563.8578 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ1FJMLPNJ0:00000002","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:33.453 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/reports/ingest - 400 null application/json; charset=utf-8 572.7505ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNJ1FJMLPNJ0:00000002","RequestPath":"/api/reports/ingest","ConnectionId":"0HNJ1FJMLPNJ0"}
2026-02-01 13:30:47.966 +03:00 [INF] Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime"}
