2026-02-01 13:30:07.008 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-01 13:30:07.044 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-01 13:30:07.048 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-01 13:30:07.052 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-01 13:30:07.065 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-02-01 13:30:07.086 +03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-01 13:30:07.088 +03:00 [INF] Database migration completed successfully
2026-02-01 13:30:07.091 +03:00 [INF] Market Intelligence API starting...
2026-02-01 13:30:07.113 +03:00 [INF] Now listening on: http://localhost:5021
2026-02-01 13:30:07.116 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-01 13:30:07.117 +03:00 [INF] Hosting environment: Development
2026-02-01 13:30:07.118 +03:00 [INF] Content root path: D:\Storage Market Intel\Alfanar.MarketIntel\Alfanar.MarketIntel.Api
2026-02-01 13:30:31.942 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - null null
2026-02-01 13:30:31.964 +03:00 [WRN] Failed to determine the https port for redirect.
2026-02-01 13:30:31.971 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:30:31.983 +03:00 [INF] Route matched with {action = "GetFiltered", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFiltered(Alfanar.MarketIntel.Application.DTOs.ReportFilterDto) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:30:31.993 +03:00 [INF] Google AI Analyzer initialized with model: gemini-2.5-flash, Caching: false, Streaming: true
2026-02-01 13:30:32.731 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyName], [t].[CreatedUtc], [t].[DownloadUrl], [t].[ErrorMessage], [t].[ExtractedText], [t].[FilePath], [t].[FileSizeBytes], [t].[FiscalQuarter], [t].[FiscalYear], [t].[IsProcessed], [t].[Language], [t].[Metadata], [t].[PageCount], [t].[ProcessedUtc], [t].[ProcessingStatus], [t].[PublishedDate], [t].[Region], [t].[ReportType], [t].[RequiredOcr], [t].[Sector], [t].[SourceUrl], [t].[Title], [t].[UpdatedUtc], [r].[Id], [r].[AiModel], [r].[AnalysisConfidence], [r].[CompetitivePosition], [r].[CreatedUtc], [r].[ExecutiveSummary], [r].[FinancialMetrics], [r].[FinancialReportId], [r].[InvestmentThesis], [r].[KeyHighlights], [r].[MarketOutlook], [r].[ProcessingTimeMs], [r].[RelatedEntities], [r].[RiskFactors], [r].[SentimentLabel], [r].[SentimentScore], [r].[StrategicInitiatives], [r].[Tags], [r].[TokensUsed], [r].[UpdatedUtc]
FROM (
    SELECT [f].[Id], [f].[CompanyName], [f].[CreatedUtc], [f].[DownloadUrl], [f].[ErrorMessage], [f].[ExtractedText], [f].[FilePath], [f].[FileSizeBytes], [f].[FiscalQuarter], [f].[FiscalYear], [f].[IsProcessed], [f].[Language], [f].[Metadata], [f].[PageCount], [f].[ProcessedUtc], [f].[ProcessingStatus], [f].[PublishedDate], [f].[Region], [f].[ReportType], [f].[RequiredOcr], [f].[Sector], [f].[SourceUrl], [f].[Title], [f].[UpdatedUtc], COALESCE([f].[PublishedDate], [f].[CreatedUtc]) AS [c]
    FROM [FinancialReports] AS [f]
    ORDER BY COALESCE([f].[PublishedDate], [f].[CreatedUtc]) DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [ReportAnalyses] AS [r] ON [t].[Id] = [r].[FinancialReportId]
ORDER BY [t].[c] DESC
2026-02-01 13:30:32.816 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [FinancialReports] AS [f]
2026-02-01 13:30:32.830 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType43`7[[System.Collections.Generic.List`1[[Alfanar.MarketIntel.Application.DTOs.FinancialReportDto, Alfanar.MarketIntel.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-01 13:30:32.856 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api) in 864.8074ms
2026-02-01 13:30:32.860 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.GetFiltered (Alfanar.MarketIntel.Api)'
2026-02-01 13:30:32.865 +03:00 [INF] HTTP GET /api/reports responded 200 in 907.3385 ms
2026-02-01 13:30:32.871 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/reports?page=1&pageSize=1 - 200 null application/json; charset=utf-8 929.9432ms
2026-02-01 13:30:32.880 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/reports/ingest - application/json 1149
2026-02-01 13:30:32.887 +03:00 [INF] Executing endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:30:32.893 +03:00 [INF] Route matched with {action = "IngestReport", controller = "Reports"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IngestReport(Alfanar.MarketIntel.Application.DTOs.IngestReportRequest) on controller Alfanar.MarketIntel.Api.Controllers.ReportsController (Alfanar.MarketIntel.Api).
2026-02-01 13:30:33.104 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceUrl_0='?' (Size = 2000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [FinancialReports] AS [f]
        WHERE [f].[SourceUrl] = @__sourceUrl_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-02-01 13:30:33.112 +03:00 [INF] Start processing HTTP request GET https://example.com/test-report.pdf
2026-02-01 13:30:33.117 +03:00 [INF] Sending HTTP request GET https://example.com/test-report.pdf
2026-02-01 13:30:33.422 +03:00 [INF] Received HTTP response headers after 299.832ms - 404
2026-02-01 13:30:33.428 +03:00 [INF] End processing HTTP request after 316.4033ms - 404
2026-02-01 13:30:33.434 +03:00 [WRN] Failed to download or store report from https://example.com/test-report.pdf: Failed to download report from https://example.com/test-report.pdf. Status: 404 Not Found
2026-02-01 13:30:33.438 +03:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-01 13:30:33.443 +03:00 [INF] Executed action Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api) in 541.5698ms
2026-02-01 13:30:33.446 +03:00 [INF] Executed endpoint 'Alfanar.MarketIntel.Api.Controllers.ReportsController.IngestReport (Alfanar.MarketIntel.Api)'
2026-02-01 13:30:33.450 +03:00 [INF] HTTP POST /api/reports/ingest responded 400 in 563.8578 ms
2026-02-01 13:30:33.453 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/reports/ingest - 400 null application/json; charset=utf-8 572.7505ms
2026-02-01 13:30:47.966 +03:00 [INF] Application is shutting down...
2026-02-01 13:31:45.817 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:31:45.852 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:31:45.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:31:45.863 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:31:45.880 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
2026-02-01 13:31:45.901 +03:00 [INF] No migrations were applied. The database is already up to date. {"EventId":{"Id":20405,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationsNotApplied"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations"}
2026-02-01 13:31:45.903 +03:00 [INF] Database migration completed successfully {}
2026-02-01 13:31:45.906 +03:00 [INF] Market Intelligence API starting... {}
2026-02-01 13:31:45.927 +03:00 [INF] Now listening on: http://localhost:5021 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
2026-02-01 13:31:45.930 +03:00 [INF] Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
2026-02-01 13:31:45.931 +03:00 [INF] Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
2026-02-01 13:31:45.933 +03:00 [INF] Content root path: D:\Storage Market Intel\Alfanar.MarketIntel\Alfanar.MarketIntel.Api {"SourceContext":"Microsoft.Hosting.Lifetime"}
