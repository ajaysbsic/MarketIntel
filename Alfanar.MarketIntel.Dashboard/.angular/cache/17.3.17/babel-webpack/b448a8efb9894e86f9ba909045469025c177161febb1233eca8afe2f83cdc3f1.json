{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/services/api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ConversationalAiComponent_div_6_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const msg_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" Confidence: \", (msg_r2.confidence * 100).toFixed(0), \"% \");\n  }\n}\nfunction ConversationalAiComponent_div_6_div_10_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r3);\n  }\n}\nfunction ConversationalAiComponent_div_6_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"strong\");\n    i0.ɵɵtext(2, \"Related Data:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\");\n    i0.ɵɵtemplate(4, ConversationalAiComponent_div_6_div_10_li_4_Template, 2, 1, \"li\", 21);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const msg_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", msg_r2.relatedData);\n  }\n}\nfunction ConversationalAiComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"span\", 14);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 15);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, ConversationalAiComponent_div_6_span_7_Template, 2, 1, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 17);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, ConversationalAiComponent_div_6_div_10_Template, 5, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const msg_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", \"message-\" + msg_r2.sender);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(msg_r2.sender === \"user\" ? \"You\" : \"\\uD83E\\uDD16 AI Assistant\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(6, 6, msg_r2.timestamp, \"HH:mm\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", msg_r2.confidence && msg_r2.sender === \"ai\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(msg_r2.content);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", msg_r2.relatedData == null ? null : msg_r2.relatedData.length);\n  }\n}\nfunction ConversationalAiComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelement(1, \"span\")(2, \"span\")(3, \"span\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ConversationalAiComponent_div_8_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function ConversationalAiComponent_div_8_button_4_Template_button_click_0_listener() {\n      const suggestion_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.useSuggestion(suggestion_r5));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const suggestion_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", suggestion_r5, \" \");\n  }\n}\nfunction ConversationalAiComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"h3\");\n    i0.ɵɵtext(2, \"Try asking:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 24);\n    i0.ɵɵtemplate(4, ConversationalAiComponent_div_8_button_4_Template, 2, 1, \"button\", 25);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.suggestedQueries);\n  }\n}\nexport let ConversationalAiComponent = /*#__PURE__*/(() => {\n  class ConversationalAiComponent {\n    constructor(apiService) {\n      this.apiService = apiService;\n      this.messages = [];\n      this.userInput = '';\n      this.isLoading = false;\n      this.suggestedQueries = ['What is the current market sentiment?', 'Which sectors are performing best?', 'Show me recent alerts', 'What are the top keywords today?', 'Analyze today\\' news trends', 'What companies are trending?'];\n    }\n    ngOnInit() {\n      // Initialize with greeting\n      this.messages.push({\n        id: '0',\n        content: 'Hello! I\\'m your AI market intelligence assistant. Ask me about market trends, sentiment analysis, or any recent news and alerts.',\n        sender: 'ai',\n        timestamp: new Date(),\n        confidence: 1\n      });\n    }\n    sendMessage() {\n      if (!this.userInput.trim()) return;\n      // Add user message\n      const userMessage = {\n        id: Date.now().toString(),\n        content: this.userInput,\n        sender: 'user',\n        timestamp: new Date()\n      };\n      this.messages.push(userMessage);\n      const query = this.userInput;\n      this.userInput = '';\n      this.isLoading = true;\n      // Query AI\n      this.apiService.queryConversationalAI(query).subscribe({\n        next: response => {\n          const aiMessage = {\n            id: (Date.now() + 1).toString(),\n            content: response.response || 'I could not generate a response. Please try again.',\n            sender: 'ai',\n            timestamp: new Date(),\n            confidence: response.confidence || 0.85,\n            relatedData: response.relatedData?.map(item => item.title || item.name)\n          };\n          this.messages.push(aiMessage);\n          this.isLoading = false;\n          this.scrollToBottom();\n        },\n        error: err => {\n          console.error('Failed to get AI response:', err);\n          const errorMessage = {\n            id: (Date.now() + 1).toString(),\n            content: 'Sorry, I encountered an error processing your request. Please try again.',\n            sender: 'ai',\n            timestamp: new Date()\n          };\n          this.messages.push(errorMessage);\n          this.isLoading = false;\n        }\n      });\n    }\n    useSuggestion(suggestion) {\n      this.userInput = suggestion;\n      this.sendMessage();\n    }\n    clearChat() {\n      this.messages = [{\n        id: '0',\n        content: 'Chat cleared. How can I help you today?',\n        sender: 'ai',\n        timestamp: new Date(),\n        confidence: 1\n      }];\n    }\n    scrollToBottom() {\n      setTimeout(() => {\n        const messagesContainer = document.querySelector('.messages');\n        if (messagesContainer) {\n          messagesContainer.scrollTop = messagesContainer.scrollHeight;\n        }\n      }, 0);\n    }\n    static {\n      this.ɵfac = function ConversationalAiComponent_Factory(t) {\n        return new (t || ConversationalAiComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ConversationalAiComponent,\n        selectors: [[\"app-conversational-ai\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 16,\n        vars: 7,\n        consts: [[\"messagesContainer\", \"\"], [1, \"chat-container\"], [1, \"chat-area\"], [1, \"messages\"], [\"class\", \"message\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"typing-indicator\", 4, \"ngIf\"], [\"class\", \"suggested-queries\", 4, \"ngIf\"], [1, \"input-area\"], [1, \"input-form\", 3, \"ngSubmit\"], [\"type\", \"text\", \"name\", \"message\", \"placeholder\", \"Ask about market sentiment, trends, alerts...\", 1, \"message-input\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [\"type\", \"submit\", 1, \"btn-send\", 3, \"disabled\"], [1, \"btn-clear\", 3, \"click\"], [1, \"message\", 3, \"ngClass\"], [1, \"message-header\"], [1, \"sender\"], [1, \"time\"], [\"class\", \"confidence\", 4, \"ngIf\"], [1, \"message-content\"], [\"class\", \"related-data\", 4, \"ngIf\"], [1, \"confidence\"], [1, \"related-data\"], [4, \"ngFor\", \"ngForOf\"], [1, \"typing-indicator\"], [1, \"suggested-queries\"], [1, \"suggestions\"], [\"class\", \"suggestion-btn\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"suggestion-btn\", 3, \"click\"]],\n        template: function ConversationalAiComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"h1\");\n            i0.ɵɵtext(2, \"AI Market Insights\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3, 0);\n            i0.ɵɵtemplate(6, ConversationalAiComponent_div_6_Template, 11, 9, \"div\", 4)(7, ConversationalAiComponent_div_7_Template, 4, 0, \"div\", 5);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(8, ConversationalAiComponent_div_8_Template, 5, 1, \"div\", 6);\n            i0.ɵɵelementStart(9, \"div\", 7)(10, \"form\", 8);\n            i0.ɵɵlistener(\"ngSubmit\", function ConversationalAiComponent_Template_form_ngSubmit_10_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.sendMessage());\n            });\n            i0.ɵɵelementStart(11, \"input\", 9);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ConversationalAiComponent_Template_input_ngModelChange_11_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.userInput, $event) || (ctx.userInput = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"button\", 10);\n            i0.ɵɵtext(13);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(14, \"button\", 11);\n            i0.ɵɵlistener(\"click\", function ConversationalAiComponent_Template_button_click_14_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.clearChat());\n            });\n            i0.ɵɵtext(15, \"Clear Chat\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.messages.length === 0);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.userInput);\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", !ctx.userInput || ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isLoading ? \"Sending...\" : \"Send\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i2.NgClass, i2.NgForOf, i2.NgIf, i2.DatePipe, FormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n        styles: [\".chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 300px);gap:1rem}h1[_ngcontent-%COMP%]{margin:0}.chat-area[_ngcontent-%COMP%]{flex:1;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;overflow-y:auto;padding:1.5rem;display:flex;flex-direction:column}.messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.message-user[_ngcontent-%COMP%]{align-items:flex-end}.message-ai[_ngcontent-%COMP%]{align-items:flex-start}.message-header[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.85rem;color:var(--text-secondary)}.sender[_ngcontent-%COMP%]{font-weight:500}.confidence[_ngcontent-%COMP%]{color:var(--success)}.message-content[_ngcontent-%COMP%]{max-width:70%;padding:1rem;border-radius:8px;line-height:1.5}.message-user[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border-radius:12px 0 12px 12px}.message-ai[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:0 12px 12px}.related-data[_ngcontent-%COMP%]{max-width:70%;padding:.75rem;background:#3498db1a;border-left:3px solid var(--info);border-radius:4px;font-size:.9rem}.related-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:.5rem 0 0 1rem;padding-left:1rem}.related-data[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.25rem 0}.suggested-queries[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:var(--bg-secondary);border-radius:8px}.suggested-queries[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem}.suggestions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem;justify-content:center}.suggestion-btn[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);padding:.75rem 1rem;border-radius:6px;cursor:pointer;transition:all .3s ease;color:var(--text-primary)}.suggestion-btn[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}.input-area[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px}.input-form[_ngcontent-%COMP%]{flex:1;display:flex;gap:.5rem}.message-input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:1px solid var(--border-color);border-radius:6px;font-size:1rem}.btn-send[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;cursor:pointer;font-weight:500;transition:opacity .3s ease}.btn-send[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.btn-send[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-clear[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);padding:.75rem 1rem;border-radius:6px;cursor:pointer;color:var(--text-primary)}.btn-clear[_ngcontent-%COMP%]:hover{background:var(--border-color)}.typing-indicator[_ngcontent-%COMP%]{display:flex;gap:.25rem;padding:1rem}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;background:var(--text-secondary);border-radius:50%;animation:_ngcontent-%COMP%_bounce 1.4s infinite}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_bounce{0%,80%,to{opacity:.5;transform:translateY(0)}40%{opacity:1;transform:translateY(-10px)}}@media (max-width: 768px){.message-content[_ngcontent-%COMP%], .related-data[_ngcontent-%COMP%]{max-width:100%}.suggestions[_ngcontent-%COMP%], .input-area[_ngcontent-%COMP%]{flex-direction:column}}\"]\n      });\n    }\n  }\n  return ConversationalAiComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}