{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { environment } from '../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/services/api.service\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"@angular/common\";\nfunction ReportsComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelement(1, \"div\", 13);\n    i0.ɵɵelementStart(2, \"h3\");\n    i0.ɵɵtext(3, \"Loading financial reports...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ReportsComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"h3\");\n    i0.ɵɵtext(2, \"\\uD83D\\uDCED No reports yet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"Waiting for financial reports to be ingested\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ReportsComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"h3\");\n    i0.ɵɵtext(2, \"\\u26A0\\uFE0F Error Loading Reports\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function ReportsComponent_div_23_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.loadReports());\n    });\n    i0.ɵɵtext(6, \"Try Again\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction ReportsComponent_ul_24_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 18)(1, \"div\", 19)(2, \"div\", 20)(3, \"div\", 21)(4, \"div\")(5, \"span\", 22);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"span\", 23);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 24)(10, \"a\", 25);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 26)(13, \"span\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"span\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 27)(22, \"a\", 28);\n    i0.ɵɵtext(23, \" \\uD83D\\uDCE5 Download PDF \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"a\", 29);\n    i0.ɵɵtext(25, \" View Source \\u2192 \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"div\", 30)(27, \"h4\");\n    i0.ɵɵtext(28, \"\\uD83E\\uDD16 AI Summary\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"div\", 31);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const report_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(report_r3.reportType || \"FINANCIAL REPORT\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.formatDate(report_r3.publishedDate || report_r3.createdUtc));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", report_r3.sourceUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", report_r3.title, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\uD83C\\uDFE2 \", report_r3.companyName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDCC5 \", ctx_r1.formatFiscalPeriod(report_r3.fiscalYear, report_r3.fiscalQuarter), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\uD83C\\uDF0D \", report_r3.region || \"Global\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDCC4 \", report_r3.pageCount || \"N/A\", \" pages\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", ctx_r1.apiBaseUrl + \"/api/reports/\" + (report_r3.id || report_r3.Id) + \"/download\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", report_r3.sourceUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getAISummary(report_r3), \" \");\n  }\n}\nfunction ReportsComponent_ul_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 16);\n    i0.ɵɵtemplate(1, ReportsComponent_ul_24_li_1_Template, 31, 11, \"li\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.reports);\n  }\n}\nexport let ReportsComponent = /*#__PURE__*/(() => {\n  class ReportsComponent {\n    constructor(apiService, sanitizer) {\n      this.apiService = apiService;\n      this.sanitizer = sanitizer;\n      this.reports = [];\n      this.isLoading = false;\n      this.error = '';\n      this.apiBaseUrl = environment.apiUrl;\n      this.pageNumber = 1;\n      this.pageSize = 10;\n      this.totalCount = 0;\n      this.totalPages = 1;\n    }\n    ngOnInit() {\n      this.loadReports();\n    }\n    loadReports() {\n      this.isLoading = true;\n      this.error = '';\n      this.apiService.getFinancialReports(this.pageNumber, this.pageSize).subscribe({\n        next: response => {\n          const items = response.items || response.data || response || [];\n          this.reports = items;\n          this.totalCount = response.totalCount ?? items.length;\n          this.totalPages = response.totalPages ?? Math.max(1, Math.ceil(this.totalCount / this.pageSize));\n          this.isLoading = false;\n        },\n        error: err => {\n          console.error('Failed to load reports:', err);\n          this.error = 'Failed to fetch reports from API';\n          this.isLoading = false;\n        }\n      });\n    }\n    clearReports() {\n      this.reports = [];\n      this.totalCount = 0;\n      this.totalPages = 1;\n    }\n    nextPage() {\n      if (this.pageNumber < this.totalPages) {\n        this.pageNumber++;\n        this.loadReports();\n      }\n    }\n    prevPage() {\n      if (this.pageNumber > 1) {\n        this.pageNumber--;\n        this.loadReports();\n      }\n    }\n    formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      const date = new Date(dateString);\n      const now = new Date();\n      const diffMs = now.getTime() - date.getTime();\n      const diffMins = Math.floor(diffMs / 60000);\n      if (diffMins < 1) return 'Just now';\n      if (diffMins < 60) return `${diffMins}m ago`;\n      if (diffMins < 1440) return `${Math.floor(diffMins / 60)}h ago`;\n      return date.toLocaleDateString();\n    }\n    formatFiscalPeriod(fiscalYear, fiscalQuarter) {\n      if (!fiscalYear) return 'N/A';\n      const quarter = fiscalQuarter ? `Q${fiscalQuarter}` : '';\n      return `${quarter} ${fiscalYear}`.trim();\n    }\n    getAISummary(report) {\n      const analysis = report.analysis || report.Analysis;\n      if (analysis) {\n        const summary = analysis.executiveSummary || analysis.ExecutiveSummary;\n        if (summary && summary.trim().length > 0) {\n          return summary;\n        }\n      }\n      return '⏳ AI summary being generated...';\n    }\n    getSentimentClass(label) {\n      if (!label) return 'info';\n      const lower = label.toLowerCase();\n      if (lower.includes('positive')) return 'success';\n      if (lower.includes('negative')) return 'danger';\n      return 'info';\n    }\n    static {\n      this.ɵfac = function ReportsComponent_Factory(t) {\n        return new (t || ReportsComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.DomSanitizer));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ReportsComponent,\n        selectors: [[\"app-reports\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 25,\n        vars: 10,\n        consts: [[1, \"reports-container\"], [1, \"controls\"], [1, \"btn-primary\", 3, \"click\"], [1, \"btn-secondary\", 3, \"click\"], [1, \"pagination-controls\"], [1, \"btn-secondary\", 3, \"click\", \"disabled\"], [1, \"page-info\"], [1, \"reports-count\"], [\"class\", \"loading-state\", 4, \"ngIf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [\"class\", \"error-state\", 4, \"ngIf\"], [\"class\", \"item-list\", 4, \"ngIf\"], [1, \"loading-state\"], [1, \"loading-spinner\"], [1, \"empty-state\"], [1, \"error-state\"], [1, \"item-list\"], [\"class\", \"item\", 4, \"ngFor\", \"ngForOf\"], [1, \"item\"], [1, \"report-container\"], [1, \"report-content\"], [1, \"item-header\"], [1, \"item-category\"], [1, \"item-time\"], [1, \"item-title\"], [\"target\", \"_blank\", \"rel\", \"noopener noreferrer\", 3, \"href\"], [1, \"item-meta\"], [1, \"report-actions\"], [1, \"item-link\", 3, \"href\"], [\"target\", \"_blank\", \"rel\", \"noopener noreferrer\", 1, \"item-link\", 3, \"href\"], [1, \"report-summary-panel\"], [1, \"summary-content\"]],\n        template: function ReportsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n            i0.ɵɵlistener(\"click\", function ReportsComponent_Template_button_click_2_listener() {\n              return ctx.loadReports();\n            });\n            i0.ɵɵtext(3, \"\\uD83D\\uDD04 Refresh\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function ReportsComponent_Template_button_click_4_listener() {\n              return ctx.clearReports();\n            });\n            i0.ɵɵtext(5, \"\\uD83D\\uDDD1\\uFE0F Clear\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 4)(7, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function ReportsComponent_Template_button_click_7_listener() {\n              return ctx.prevPage();\n            });\n            i0.ɵɵtext(8, \" \\u25C0 Previous \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"span\", 6);\n            i0.ɵɵtext(10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function ReportsComponent_Template_button_click_11_listener() {\n              return ctx.nextPage();\n            });\n            i0.ɵɵtext(12, \" Next \\u25B6 \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"span\", 7);\n            i0.ɵɵtext(14, \" Showing: \");\n            i0.ɵɵelementStart(15, \"strong\");\n            i0.ɵɵtext(16);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(17, \" of \");\n            i0.ɵɵelementStart(18, \"strong\");\n            i0.ɵɵtext(19);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(20, \" reports \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(21, ReportsComponent_div_21_Template, 4, 0, \"div\", 8)(22, ReportsComponent_div_22_Template, 5, 0, \"div\", 9)(23, ReportsComponent_div_23_Template, 7, 1, \"div\", 10)(24, ReportsComponent_ul_24_Template, 2, 1, \"ul\", 11);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"disabled\", ctx.pageNumber <= 1);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate2(\"Page \", ctx.pageNumber, \" of \", ctx.totalPages, \"\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.pageNumber >= ctx.totalPages);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(ctx.reports.length);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.totalCount);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.reports.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error && !ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.reports.length > 0);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf],\n        styles: [\".reports-container[_ngcontent-%COMP%]{padding:1rem 0}.controls[_ngcontent-%COMP%]{padding:1rem 2rem;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;gap:1rem;align-items:center}.reports-count[_ngcontent-%COMP%]{margin-left:auto;color:#666;font-size:.9em}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.page-info[_ngcontent-%COMP%]{color:#555;font-size:.9em;min-width:120px;text-align:center}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:.95rem;cursor:pointer;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{opacity:.9;box-shadow:0 4px 12px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem}.loading-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.loading-spinner[_ngcontent-%COMP%]{border:3px solid #f0f0f0;border-top:3px solid #667eea;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.item-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.item[_ngcontent-%COMP%]{padding:1.5rem 2rem;border-bottom:1px solid #e0e0e0;transition:background-color .3s ease}.item[_ngcontent-%COMP%]:hover{background-color:#667eea0d}.report-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem}.report-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.item-category[_ngcontent-%COMP%]{display:inline-block;background:#2ecc71;color:#fff;padding:.4rem .8rem;border-radius:20px;font-size:.8rem;font-weight:600}.item-time[_ngcontent-%COMP%]{color:#999;font-size:.9rem}.item-title[_ngcontent-%COMP%]{margin:.5rem 0}.item-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#333;text-decoration:none}.item-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#667eea}.item-meta[_ngcontent-%COMP%]{display:flex;gap:1.5rem;flex-wrap:wrap;color:#666;font-size:.9rem}.report-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.item-link[_ngcontent-%COMP%]{display:inline-block;padding:.6rem 1.2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;text-decoration:none;border-radius:4px;font-weight:500;transition:all .3s ease}.item-link[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px);box-shadow:0 4px 12px #667eea4d}.report-summary-panel[_ngcontent-%COMP%]{background:#fffacd;border-left:4px solid #ffc107;padding:1.5rem;border-radius:4px}.report-summary-panel[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#333;font-size:1rem}.summary-content[_ngcontent-%COMP%]{color:#555;line-height:1.6;font-size:.95rem;max-height:200px;overflow-y:auto}@media (max-width: 1024px){.report-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.report-summary-panel[_ngcontent-%COMP%]{border-left:none;border-top:4px solid #ffc107;margin-top:1rem}}\"]\n      });\n    }\n  }\n  return ReportsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}